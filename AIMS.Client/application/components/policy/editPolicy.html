<form (submit)="save()" [hidden]="complete">
    <h4>{{ title }}</h4>

    <tabset *ngIf="ready">
        <tab heading="General">
            <table class="table">
                <tr>
                    <td>Policy Type</td>
                    <td>{{ entity.PolicySubType.PolicyType.Name }}</td>
                </tr>
                <tr>
                    <td>Policy Sub Type</td>
                    <td>{{ entity.PolicySubType.Name }}</td>
                </tr>
                <tr>
                    <td>Policy Number</td>
                    <td>{{ entity.PolicyNumber }}</td>
                </tr>
                <tr>
                    <td>Status</td>
                    <td></td>
                </tr>
            </table>
        </tab>
        <tab heading="Risk Locations">
            <policyRiskLocations [(value)]="entity" [dataService]="dataService"></policyRiskLocations>
        </tab>

        <tab heading="Operators">
            <policyOperators [(value)]="entity" [dataService]="dataService"></policyOperators>
        </tab>

        <tab heading="Insurable Items">
            <policyInsurableItems [(value)]="entity" [dataService]="dataService"></policyInsurableItems>
        </tab>
        <tab heading="Policy Holders">
            <policyHolders [(value)]="entity" [dataService]="dataService"></policyHolders>
        </tab>

        <tab heading="Service Providers">
            <policyServiceProviders [(value)]="entity" [dataService]="dataService"></policyServiceProviders>
        </tab>

        <tab heading="Agents">
        </tab>

        <tab heading="Transaction Triggers">
            <transactionTriggers [(value)]="entity" [dataService]="dataService" type="PolicyTransactionTrigger"></transactionTriggers>
        </tab>

        <tab heading="Journals">
            <div journalExplorer path="Policies({{entity.ID}})/Journals"></div>
        </tab>

        <tab heading="Balances">
            Effective Date:
            <input dateInput [(value)]="ledgerBalanceDate" />
            <div ledgerBalances source="Policy" [id]="entity.ID" [effectiveDate]="ledgerBalanceDate"></div>
        </tab>

        <tab heading="Context Parameters">
            <contextParameterValues [value]="entity" [dataService]="dataService" childType="PolicyContextParameterValue"></contextParameterValues>
        </tab>

    </tabset>


    <error-summary [canShow]="showErrorSummary" [entity]="entity"></error-summary>

    <div class="modal-footer">

        <button *ngFor="#cmd of commands" 
                type="button" 
                class="btn" 
                [disabled]="!cmd.CanExecute"
                (click)="transitionPolicy(cmd.PolicyTypeTransitionID)">
            {{ cmd.Text }} 
        </button>
        <button type="button" class="btn btn-danger" (click)="ratePolicy()">Rate</button>
        <button type="submit" class="btn btn-primary">Save</button>
    </div>


</form>
